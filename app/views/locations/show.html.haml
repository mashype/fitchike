%p#notice= notice
%p
  %strong Address 1:
  = @location.address_1
%p
  %strong Address 2:
  = @location.address_2
%p
  %strong City:
  = @location.city
%p
  %strong State:
  = @location.state
%p
  %strong Zip:
  = @location.zip
%p
  %strong Lat:
  = @location.lat
%p
  %strong Lon:
  = @location.lon
= link_to 'Edit', edit_location_path(@location)
|
\#{link_to 'Back', locations_path}



:css
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map-canvas { height: 100% }
%script{:src => "https://maps.googleapis.com/maps/api/js?key=AIzaSyCHo7P-uEfAEioZyTEw51cjJxfGlQf5tiM&sensor=false", :type => "text/javascript"}
  :cdata
:javascript
  function set_map(state, city){
    var mapOptions = {
      center: new google.maps.LatLng(25.687944,-100.309403),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map-canvas"),
    mapOptions);

    if(state == ""){
      address = city;
    }else{
      address = state + ',' + city;
    }

    var geocoder = new google.maps.Geocoder();

    geocoder.geocode({
      'address':address
    },

    function(result, status){
      if (status == google.maps.GeocoderStatus.OK){
        map.setCenter(result[0].geometry.location);

        var marker = new google.maps.Marker({
          map: map,
          position: result[0].geometry.location
        });
      }else{
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
    return false;
  }

  $(document).ready(function(){
    set_map('#{@location.lat}', '#{@location.lon}');
  })
= succeed "\u{a0}" do
  %label Location :
%br/
%br/
#map-canvas{:style => "width:300px;height:200px"}
